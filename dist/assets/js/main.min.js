function changeColor(){var o=$("#red").val(),t=$("#green").val(),e=$("#blue").val(),c=$("#opacity").val()/100;$("#newColor").css("background-color","rgba("+o+","+t+", "+e+", "+c+")")}function changeStroke(){stroke=$(this).val(),$("#strokeVal").text(stroke+" px"),$("#strokeBox").width(stroke)}function changeOpacity(){opacityVal=$(this).val()/100;var o=$("#red").val(),t=$("#green").val(),e=$("#blue").val(),c=opacityVal;$(".selected").css("background-color","rgba("+o+","+t+", "+e+", "+c+")"),color=$(".selected").css("background-color"),$("#opacityVal").text(opacityVal)}function init(){var o=document.getElementById("canvas");o.addEventListener("touchmove",draw,!1),o.addEventListener("touchend",end,!1),ctx=o.getContext("2d")}function draw(o){o.preventDefault(),null!=lastPt&&(ctx.beginPath(),ctx.strokeStyle=color,ctx.lineWidth=stroke,ctx.lineCap="round",ctx.moveTo(lastPt.x,lastPt.y),ctx.lineTo(o.touches[0].pageX,o.touches[0].pageY),ctx.stroke()),lastPt={x:o.touches[0].pageX,y:o.touches[0].pageY}}function end(o){o.preventDefault(),lastPt=null}var color=$(".selected").css("background-color"),$canvas=$("canvas"),context=$canvas[0].getContext("2d"),lastEvent,canvas,ctx,lastPt=null,mouseDown=!1,stroke=7,opacityVal=100;opacityVal/=100,context.canvas.width=$(window).width(),$("#strokeVal").text(stroke+" px"),$("#strokeBox").width(stroke).css("background-color",color),$("#opacityVal").text(opacityVal),$(window).on("resize",function(){context.canvas.width=$(window).width()}),$(".controls").on("click","li",function(){$(".controls li").removeClass("selected"),$(this).addClass("selected"),color=$(this).css("background-color"),$("#strokeBox").css("background-color",color),$(this).hasClass("white")?$("#strokeBox").css("border","1px solid #000"):$("#strokeBox").css("border","none")}),$("#revealColorSelect").click(function(){changeColor(),$("#colorSelect").slideToggle()}),$("#stroke").change(changeStroke),$(".sliders input[type=range]").change(changeColor),$("#opacity").change(changeOpacity),$("#addNewColor").click(function(){var o=$("<li></li>");o.css("background-color",$("#newColor").css("background-color")),$(".color-picker").append(o),o.click()});