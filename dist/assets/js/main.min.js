function changeColor(){var o=$("#red").val(),e=$("#green").val(),t=$("#blue").val();$("#newColor").css("background-color","rgb("+o+","+e+", "+t+")")}function changeStroke(){stroke=$(this).val(),$("#strokeVal").text(stroke+" px"),$("#strokeBox").width(stroke)}var color=$(".selected").css("background-color"),$canvas=$("canvas"),context=$canvas[0].getContext("2d"),lastEvent,mouseDown=!1,stroke=7;context.canvas.width=$(".container").width(),$("#strokeVal").text(stroke+" px"),$("#strokeBox").width(stroke).css("background-color",color),$(window).on("resize",function(){context.canvas.width=$(".container").width()}),$(".controls").on("click","li",function(){console.log($(this)),$(".controls li").removeClass("selected"),$(this).addClass("selected"),color=$(this).css("background-color"),$("#strokeBox").css("background-color",color),$(this).hasClass("white")?$("#strokeBox").css("border","1px solid #000"):$("#strokeBox").css("border","none")}),$("#revealColorSelect").click(function(){changeColor(),$("#colorSelect").slideToggle()}),$("#stroke").change(changeStroke),$(".sliders input[type=range]").change(changeColor),$("#addNewColor").click(function(){var o=$("<li></li>");o.css("background-color",$("#newColor").css("background-color")),$(".color-picker").append(o),o.click()}),$canvas.mousedown(function(o){lastEvent=o,mouseDown=!0}).mousemove(function(o){mouseDown&&(context.beginPath(),context.moveTo(lastEvent.offsetX,lastEvent.offsetY),context.lineTo(o.offsetX,o.offsetY),context.strokeStyle=color,context.lineWidth=stroke,context.stroke(),lastEvent=o)}).mouseup(function(){mouseDown=!1}).mouseleave(function(){$canvas.mouseup()});